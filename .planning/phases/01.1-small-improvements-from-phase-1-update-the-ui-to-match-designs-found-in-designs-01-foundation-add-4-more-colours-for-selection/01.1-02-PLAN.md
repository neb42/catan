---
phase: 01.1-small-improvements
plan: 02
type: execute
wave: 2
depends_on: [01.1-01]
files_modified:
  - apps/web/src/components/CreateRoom.tsx
  - apps/web/src/components/JoinRoom.tsx
  - apps/web/src/components/Lobby.tsx
  - apps/web/src/components/PlayerList.tsx
  - apps/web/src/app/app.tsx
autonomous: false

must_haves:
  truths:
    - "Landing page displays with improved visual design (cards, spacing, typography)"
    - "Lobby displays player avatars with colored circles"
    - "Color picker shows 8 color options in modern UI"
    - "Room code displays in styled pill with copy button"
    - "Background pattern visible on both pages"
  artifacts:
    - path: "apps/web/src/components/CreateRoom.tsx"
      provides: "Styled create room card"
      contains: "className"
    - path: "apps/web/src/components/JoinRoom.tsx"
      provides: "Styled join room card"
      contains: "className"
    - path: "apps/web/src/components/Lobby.tsx"
      provides: "Styled lobby container"
      contains: "className"
    - path: "apps/web/src/components/PlayerList.tsx"
      provides: "Styled player list with avatars and color picker"
      contains: "className"
    - path: "apps/web/src/app/app.tsx"
      provides: "Background pattern element"
      contains: "bg-pattern"
  key_links:
    - from: "apps/web/src/components/PlayerList.tsx"
      to: "apps/web/src/styles.css"
      via: "className references"
      pattern: "c-(red|blue|green|yellow)"
    - from: "apps/web/src/app/app.tsx"
      to: "apps/web/src/styles.css"
      via: "bg-pattern class"
      pattern: "bg-pattern"
---

<objective>
Update component styling to match design mockups while maintaining all existing functionality.

Purpose: Apply new visual design to landing and lobby interfaces without changing WebSocket/state logic
Output:
- CreateRoom and JoinRoom components with improved styling
- Lobby and PlayerList components with avatar styling and modern color picker
- Background pattern visible across app
</objective>

<execution_context>
@./.github/get-shit-done/workflows/execute-plan.md
@./.github/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01.1-small-improvements-from-phase-1-update-the-ui-to-match-designs-found-in-designs-01-foundation-add-4-more-colours-for-selection/01.1-01-SUMMARY.md

# Design reference
@.designs/01-foundation/landing.html
@.designs/01-foundation/lobby.html

# Components to update
@apps/web/src/components/CreateRoom.tsx
@apps/web/src/components/JoinRoom.tsx
@apps/web/src/components/Lobby.tsx
@apps/web/src/components/PlayerList.tsx
@apps/web/src/app/app.tsx

# Available styles
@apps/web/src/styles.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add background pattern to app root</name>
  <files>apps/web/src/app/app.tsx</files>
  <action>
Add background pattern element to app root, before main content.

In the return statement of App component, add as first child:
```tsx
<div className="bg-pattern" />
```

This creates the decorative dot pattern visible in designs.

DO NOT change any existing functionality or imports.
ONLY add the background div.
  </action>
  <verify>
Run: `grep "bg-pattern" apps/web/src/app/app.tsx`
Expected: One line with className="bg-pattern"
  </verify>
  <done>Background pattern div present in app.tsx</done>
</task>

<task type="auto">
  <name>Task 2: Update CreateRoom and JoinRoom styling</name>
  <files>
    apps/web/src/components/CreateRoom.tsx
    apps/web/src/components/JoinRoom.tsx
  </files>
  <action>
Update both CreateRoom and JoinRoom components to use enhanced Mantine styling that matches design aesthetic.

For both components:
1. Keep ALL existing props, state, logic, handlers unchanged
2. Update Mantine component props for visual alignment:
   - Card: Use `shadow="lg"` instead of "sm", keep padding="lg"
   - Title: Use `order={2}` (larger), add `fw={800}` (bolder), `ff="Fraunces, serif"`
   - Text: Keep existing but add `fz="lg"` for tagline
   - TextInput: Add `size="lg"`, `styles` prop for larger text and padding
   - Button: Use `size="lg"`, `fw={800}`

3. Add wrapping div with animations:
```tsx
<div style={{ animation: 'slideUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards' }}>
  {/* existing Card content */}
</div>
```

Reference: .designs/01-foundation/landing.html lines 90-170 for styling approach.

DO NOT change any WebSocket logic, validation, or event handlers.
DO NOT remove any existing functionality.
ONLY update visual styling via Mantine props and wrapper animation.
  </action>
  <verify>
Commands:
```bash
grep -q 'ff="Fraunces' apps/web/src/components/CreateRoom.tsx && echo "✓ CreateRoom styled"
grep -q 'ff="Fraunces' apps/web/src/components/JoinRoom.tsx && echo "✓ JoinRoom styled"
grep -q "slideUp" apps/web/src/components/CreateRoom.tsx && echo "✓ Animation added"
```
All 3 checks should pass.
  </verify>
  <done>CreateRoom and JoinRoom use larger text, Fraunces font, enhanced shadows, slide-up animation</done>
</task>

<task type="auto">
  <name>Task 3: Update Lobby component styling</name>
  <files>apps/web/src/components/Lobby.tsx</files>
  <action>
Update Lobby component styling to match design aesthetic.

Changes:
1. Update lobby Card props:
   - `shadow="lg"` instead of "sm"
   - Add `style` for animation: `{{ animation: 'fadeInUp 0.6s ease' }}`

2. Update Title for room code:
   - Use `ff="Fraunces, serif"`
   - `fw={800}`
   - `order={2}`

3. Update "Copy room ID" Button:
   - `size="md"`
   - `fw={700}`

4. Keep ALL WebSocket logic, state management, handlers unchanged
5. Keep ALL existing Alert components unchanged

Reference: .designs/01-foundation/lobby.html lines 60-110 for lobby card styling.

DO NOT change any functional behavior.
ONLY update visual props of Mantine components.
  </action>
  <verify>
Commands:
```bash
grep -q 'ff="Fraunces' apps/web/src/components/Lobby.tsx && echo "✓ Fraunces font used"
grep -q "fadeInUp" apps/web/src/components/Lobby.tsx && echo "✓ Animation added"
npx nx build web && echo "✓ Build passes"
```
All 3 checks should pass.
  </verify>
  <done>Lobby component uses enhanced styling with animations and typography</done>
</task>

<task type="auto">
  <name>Task 4: Update PlayerList with avatars and modern color picker</name>
  <files>apps/web/src/components/PlayerList.tsx</files>
  <action>
Redesign PlayerList to show circular avatars with initials and modern inline color picker.

Changes:

1. Replace ColorSwatch + Select pattern with Avatar + ColorSwatch grid:
   - Show Avatar (from @mantine/core) with player initials (first 2 chars of nickname, uppercase)
   - Avatar background color matches player.color using className={`c-${player.color}`}
   - Avatar size: 80px, text size: 32px, bold

2. For current player, show inline color picker below avatar:
   - Grid of ColorSwatch components (one per PLAYER_COLORS)
   - Each swatch: size={32}, className={`c-${color}`}, onClick handler
   - Current color gets `style` with border: `3px solid var(--color-text)`
   - Wrap in Group with gap="xs"

3. Card layout per player:
   - Center-aligned vertical stack
   - Avatar at top
   - Player name below (fw={700}, size="lg", ff="Fraunces, serif")
   - Ready badge below name
   - Color picker below badge (only for current player)

4. Remove Select dropdown entirely
5. Keep ALL existing handlers (onColorChange, onReadyToggle) unchanged
6. Keep ALL existing props unchanged

Reference: .designs/01-foundation/lobby.html lines 120-200 for avatar and color picker UI.

Import Avatar from @mantine/core if not already imported.

DO NOT change any WebSocket message sending logic.
DO NOT change prop types or component signature.
ONLY redesign the visual presentation.
  </action>
  <verify>
Commands:
```bash
grep -q "Avatar" apps/web/src/components/PlayerList.tsx && echo "✓ Avatar component used"
grep -q "c-\${" apps/web/src/components/PlayerList.tsx && echo "✓ Color classes applied"
! grep -q "Select" apps/web/src/components/PlayerList.tsx && echo "✓ Select removed"
npx nx build web && echo "✓ Build passes"
```
All 4 checks should pass.
  </verify>
  <done>PlayerList shows circular avatars with initials, inline color picker with swatches, maintains all functionality</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete UI refresh with:
- 8 player color options
- Landing page with new fonts and styling
- Lobby with player avatars showing initials
- Inline color picker with colored circles
- Background decorative pattern
- Smooth animations throughout
  </what-built>
  <how-to-verify>
1. Start development servers:
   ```bash
   npx nx serve api
   npx nx serve web
   ```

2. Visit http://localhost:5173 in browser

3. Test landing page:
   - Verify Fraunces font used for "Settlers" title
   - Verify background has subtle dot pattern
   - Verify cards have larger shadows
   - Enter nickname, click "Create Room"

4. Test lobby page:
   - Verify room code displays in styled pill
   - Verify your player shows circular avatar with initials (first 2 letters of nickname)
   - Verify color picker shows 8 colored circles below your avatar
   - Click each color circle - verify avatar changes color
   - Click "Ready up" - verify badge changes

5. Open second browser tab to http://localhost:5173:
   - Enter different nickname, click "Join Room"
   - Enter room code from first tab, join
   - Verify second player appears with different avatar
   - Verify both players visible in both tabs
   - Verify color changes propagate across tabs

6. Visual checks:
   - Background pattern visible on both pages
   - Smooth fade/slide animations when pages load
   - Typography uses Fraunces (titles) and Outfit (body)
   - Color palette matches designs (terracotta, teal, saffron tones)

Expected: All functionality works, new design applied throughout, 8 colors available
  </how-to-verify>
  <resume-signal>Type "approved" if everything works and looks good, or describe any issues</resume-signal>
</task>

</tasks>

<verification>
1. **Build succeeds:**
   ```bash
   npx nx build web
   ```

2. **All 8 colors render:**
   Open browser console, check PlayerList component renders 8 ColorSwatch elements

3. **Background pattern visible:**
   Inspect page, verify div with class="bg-pattern" exists

4. **Fonts loaded:**
   Browser DevTools > Network tab shows fonts.googleapis.com requests loaded successfully
</verification>

<success_criteria>
1. **8 colors selectable** — Color picker shows 8 circles, clicking each changes avatar color
2. **Design applied** — Landing and lobby pages match design aesthetic (fonts, colors, spacing, shadows)
3. **Avatars display** — Player list shows circular avatars with initials, colored background
4. **Background pattern visible** — Decorative dot pattern appears behind content
5. **Animations smooth** — Cards fade/slide in on page load
6. **All functionality preserved** — Creating rooms, joining, color changes, ready toggle all work via WebSocket
</success_criteria>

<output>
After completion, create `.planning/phases/01.1-small-improvements-from-phase-1-update-the-ui-to-match-designs-found-in-designs-01-foundation-add-4-more-colours-for-selection/01.1-02-SUMMARY.md`
</output>
