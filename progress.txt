# Progress Log

## Learnings
(Patterns discovered during implementation)
- Nx 22.x uses `@nx/js` plugin with TypeScript support built-in
- Use `workspaceLayout` in nx.json to configure apps/libs directories
- Typecheck with `npx tsc --noEmit` at root level
- *.tsbuildinfo files should be in .gitignore

---

## Iteration 1 - US-001: Initialize Nx Workspace
- What was implemented:
  - Created Nx workspace using create-nx-workspace with ts preset
  - Configured apps/ and libs/ directory structure
  - Added SUMMARY.md at workspace root
  - Updated nx.json with workspaceLayout
  - Fixed package.json workspaces and name
- Files changed:
  - nx.json (added workspaceLayout)
  - package.json (fixed name and workspaces)
  - tsconfig.base.json (fixed customConditions)
  - SUMMARY.md (new)
  - .gitignore (added *.tsbuildinfo)
- Learnings for future iterations:
  - create-nx-workspace cannot be run in existing dir, create then copy
  - The ts preset creates "packages/" dir - must manually change to apps/libs
  - All acceptance criteria should be verified before marking complete
---

## Iteration 2 - US-002: Create Express API Application
- What was implemented:
  - Verified apps/api/ directory structure already existed from previous setup
  - apps/api/src/main.ts entry point with Express server and PORT config
  - project.json with build (using @nx/js:swc) and serve targets
  - tsconfig.json and tsconfig.app.json properly configured
  - SUMMARY.md already present explaining the application
- Files changed:
  - PRD.md (marked US-002 as complete)
  - progress.txt (added this entry)
- Learnings for future iterations:
  - The api app was scaffolded in a previous iteration - check existing state first
  - Typecheck for api app: `npx tsc --noEmit -p apps/api/tsconfig.app.json`
  - Express 5.x is being used (check package.json)
  - @nx/js:swc executor is used for building, @nx/js:node for serving
  - Need @swc/cli package for SWC build executor to work
  - .swcrc config file required in apps/api/ directory
---

## Iteration 3 - US-003: Set Up Environment Configuration
- What was implemented:
  - Verified dotenv was already installed (and added it to ensure it's there)
  - .env.example already exists with PORT, NODE_ENV, WS_PORT documented
  - .env already added to .gitignore (with .env.local patterns)
  - apps/api/src/config/index.ts already exists with typed AppConfig
  - Config loaded and validated with proper error handling
  - SUMMARY.md in config/ directory with usage documentation
- Files changed:
  - PRD.md (marked US-003 as complete)
  - progress.txt (added this entry)
  - package.json, package-lock.json (ensured dotenv dependency)
- Learnings for future iterations:
  - Previous iterations may have implemented parts of future tasks
  - Always verify existing state before implementing
  - dotenv.config() should use path.resolve for reliable .env loading
  - Config validates NODE_ENV against allowed values
---

## Iteration 4 - US-004: Create Core Directory Structure
- What was implemented:
  - Created all required directories under apps/api/src/:
    - features/ (empty, for future feature modules)
    - middleware/ (for Express middleware)
    - routes/ (for route mounting logic)
    - utils/ (for utility functions)
    - types/ (for shared type definitions)
    - constants/ (for application constants)
    - models/ (for data models)
    - services/ (for business logic services)
  - Created SUMMARY.md files for each directory explaining purpose and guidelines
- Files changed:
  - apps/api/src/features/SUMMARY.md (new)
  - apps/api/src/middleware/SUMMARY.md (new)
  - apps/api/src/routes/SUMMARY.md (new)
  - apps/api/src/utils/SUMMARY.md (new)
  - apps/api/src/types/SUMMARY.md (new)
  - apps/api/src/constants/SUMMARY.md (new)
  - apps/api/src/models/SUMMARY.md (new)
  - apps/api/src/services/SUMMARY.md (new)
  - PRD.md (marked US-004 as complete)
  - progress.txt (added this entry)
- Learnings for future iterations:
  - SUMMARY.md files serve as AI context for understanding directory purposes
  - Empty directories with only SUMMARY.md still pass typecheck
  - Feature-based architecture groups related code together
---
